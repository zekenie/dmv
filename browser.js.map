{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 1af9f338ebeec895b53d","webpack:///./bundle.js","webpack:///./dmv.js","webpack:///./noun.js","webpack:///./afterSetup.js","webpack:///./role.js","webpack:///./nouns.js","webpack:///./nounManager.js","webpack:///./roleManager.js","webpack:///./roles.js","webpack:///./angularPlugin.js","webpack:///./canMixin.js"],"names":["module","exports","require","angular","Noun","Role","RoleManager","NounManager","nouns","roles","addEntity","store","Constructor","name","after","get","set","instance","setupRan","_afterSetup","noun","bind","role","getAllNouns","Array","from","values","getNoun","getRole","reset","clear","setTimeout","entities","concat","forEach","setup","constructor","verbs","Set","permissions","v","verb","hasVerb","has","add","removeVerb","delete","authorize","filter","checkAuthorization","AfterSetup","_afterSetupFns","fn","call","push","can","Error","map","Map","r","some","dmv","roleManager","canMixin","factory","proto","extend","$rootScope","$injector","userGetterMethod","asyncUserGetterMethod","canGetUserAsync","getUser","invoke","getUserAsync","e","hasRole","$on","event","next","user","Promise","resolve","then","auth","$broadcast","preventDefault","hasOwnProperty","onPermissionList","list","find","item","permissionWhiteList","permissionBlackList","indexOf","isArray"],"mappings":"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","file":"./browser.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"dmv\"] = factory();\n\telse\n\t\troot[\"dmv\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1af9f338ebeec895b53d","'use strict';\n\n// we need to expose the dmv api\nmodule.exports = require('./dmv');\n// angular code just needs to run. it will register module with angular\nif(typeof angular !== 'undefined') {\n  require('./angularPlugin');\n}\n\n\n// WEBPACK FOOTER //\n// ./bundle.js","/**\n * @fileOverview This is the root of the project. It allows users to register nouns and roles with dmv. It also exports plugins.\n * @module main\n * @requires Noun\n * @requires Role\n * @requires RoleManager\n * @requires NounManager\n */\n\n'use strict';\nconst Noun = require('./noun');\nconst Role = require('./role');\n\nconst RoleManager = require('./roleManager');\nconst NounManager = require('./nounManager');\nconst nouns = require('./nouns');\nconst roles = require('./roles');\n\nconst addEntity = function (store, Constructor, name, after) {\n  if(!store.get(name)) { store.set(name, new Constructor(name)); }\n  const instance = store.get(name);\n  if(this.setupRan) { instance.setupRan = true; }\n  if(after) { instance._afterSetup(after); }\n  return instance;\n};\n\n/**\n * Register a new noun\n * @param  {string} name - noun name\n * @param  {function} after - fn to run after setup. Passed noun instance. \n * @return {noun}       returns noun instance\n */\nexports.noun = addEntity.bind(exports, nouns, Noun);\n\n/**\n * Register a new role\n * @param  {string} name - role name\n * @param  {function} after - fn to run after setup. Passed role instance. \n * @return {role}       returns role instance\n */\nexports.role = addEntity.bind(exports, roles, Role);\n\n/**\n * Gets all registered nouns. Must be called after setup\n * @return {Iterator<Noun>}\n */\nexports.getAllNouns = function() {\n  return Array.from(nouns.values());\n};\n\nexports.getNoun = nouns.get.bind(nouns);\nexports.getRole = roles.get.bind(roles);\n\n/**\n* Empty nouns and roles, resetting dmv. Use with caution.\n*/\nexports.reset = function () {\n  nouns.clear();\n  roles.clear();\n};\n\nsetTimeout(function() {\n  var entities = Array.from(nouns.values()).concat(Array.from(roles.values()));\n  entities.forEach( (instance) => instance.setup() );\n  exports.setupRan = true;\n}, 0);\n\n\n// WEBPACK FOOTER //\n// ./dmv.js","'use strict';\n/**\n * @class  Noun\n */\n\nclass Noun extends require('./afterSetup'){\n  /**\n   * @param  {string} name - name of noun\n   * @return {noun}        - the created noun\n   */\n  constructor(name) {\n    super();\n    this.name = name;\n    this.verbs = new Set();\n    this.permissions = {};\n    ['create','read','update','delete'].forEach( (v) => this.verb(v), this);\n  }\n\n  /**\n   * Checks to see if noun has verb\n   * @param  {string}  verb\n   * @return {Boolean}\n   */\n  hasVerb(verb) {\n    return this.verbs.has(verb);\n  }\n\n  /**\n   * Adds verb to the set of posible verbs that can be authorized. For example, `post.can('like')` would add the verb 'like' to a noun 'post'\n   * @param  {string} verb\n   */\n  verb(verb) {\n    this.verbs.add(verb);\n  }\n\n  /**\n   * Removes a verb from the set of possible verbs. Useful for removing default crud.\n   * @param  {string} verb\n   */\n  removeVerb(verb) {\n    this.verbs.delete(verb);\n  }\n\n  /**\n   * Authorizes a role to perform a verb.\n   * @param  {string} role\n   * @param  {string[]|string} verbs - Either the string '*', which authorizes all possible verbs to the given role, or an array of verbs to authorize.\n   */\n  authorize(role, verbs) {\n    if(verbs === '*') {\n      verbs = this.verbs;\n    } else {\n      verbs = verbs.filter( (v) => this.verbs.has(v), this);\n    }\n    this.permissions[role] = this.permissions[role] || new Set();\n    verbs.forEach( (v) => this.permissions[role].add(v) );\n  }\n\n  /**\n   * Checks if a role is regestered and it has the permission\n   * @param  {string} role\n   * @param  {string} verb\n   * @return {boolean}\n   */\n  checkAuthorization(role, verb) {\n    return !!this.permissions[role] && this.permissions[role].has(verb);\n  }\n\n}\n\nmodule.exports = Noun;\n\n\n// WEBPACK FOOTER //\n// ./noun.js","'use strict';\n\nmodule.exports = class AfterSetup {\n  constructor() {\n    this._afterSetupFns = [];\n  }\n\n  _afterSetup(fn) {\n    if(this.setupRan) {\n      fn.call(this, this);\n    }\n    this._afterSetupFns.push(fn);\n  }\n\n  setup() {\n    this._afterSetupFns.forEach( (fn) => fn.call(this, this), this);\n    this.setupRan = true;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./afterSetup.js","'use strict';\n/**\n * @class Role\n */\nconst nouns = require('./nouns');\n\nclass Role extends require('./afterSetup'){\n  constructor(name) {\n    super();\n    this.name = name;\n  }\n\n  /**\n   * Checks if a given noun can perform a given verb\n   * @function\n   * @example\n   * someRole.can('eat','brick'); // -> true\n   * @param  {string} verb\n   * @param  {string} noun\n   * @return {boolean}\n   */\n  can(verb, noun) {\n    if(!nouns.has(noun)) { return false; }\n    return nouns.get(noun).checkAuthorization(this.name, verb);\n  }\n\n  /**\n   * Authorizes this role to perform an array of actions on a verb\n   * @function\n   * @see  Noun#authorize\n   * @example  someRole.authorize(['create','read'], 'kitten');\n   * @param  {String[]|String} verbs - Either an array of verbs already regestered with the noun, or `'*'` to allow access to all verbs\n   * @param  {String} noun\n   */\n  authorize(verbs, noun) {\n    if(!nouns.has(noun)) { throw new Error(`cannot authorize ${noun}`); }\n    nouns.get(noun).authorize(this.name, verbs);\n  }\n}\n\n\nmodule.exports = Role;\n\n\n// WEBPACK FOOTER //\n// ./role.js","'use strict';\n\nconst NounManager = require('./nounManager');\n\nmodule.exports = new NounManager();\n\n\n// WEBPACK FOOTER //\n// ./nouns.js","'use strict';\n\n/** @todo  extends Map */\nclass NounManager {\n  constructor() {\n    this.map = new Map();\n    this.set = this.map.set.bind(this.map);\n    this.get = this.map.get.bind(this.map);\n    this.has = this.map.has.bind(this.map);\n    this.values = this.map.values.bind(this.map);\n    this.clear = this.map.clear.bind(this.map);\n  }\n}\n\nmodule.exports = NounManager;\n\n\n// WEBPACK FOOTER //\n// ./nounManager.js","'use strict';\n/**\n * @module  RoleManager\n */\n\n\n/** @todo  extends Map */\nclass RoleManager {\n\n  constructor() {\n    this.map = new Map();\n    this.set = this.map.set.bind(this.map);\n    this.get = this.map.get.bind(this.map);\n    this.has = this.map.has.bind(this.map);\n    this.values = this.map.values.bind(this.map);\n    this.clear = this.map.clear.bind(this.map);\n  }\n  can(roles, verb, noun) {\n    return roles.map(r => this.get(r) || { can: () => false })\n      .some(r => r.can(verb, noun));\n  }\n}\n\nmodule.exports = RoleManager;\n\n\n// WEBPACK FOOTER //\n// ./roleManager.js","'use strict';\n\nconst RoleManager = require('./roleManager');\n\nmodule.exports = new RoleManager();\n\n\n// WEBPACK FOOTER //\n// ./roles.js","'use strict';\n\n/**\n * @description An angular module that hooks into $stateChangeStart event on UI-Router and lets routes define permissions\n * @example\n * .factory('yourLoginFactory', function(authConfig) {\n *   // on login\n *   authConfig.setUser(yourUser) // <- YOUR USER MUST HAVE CAN METHOD\n * })\n * @module plugins/angular\n */\n\nconst dmv = require('./dmv');\nconst roleManager = require('./roleManager');\nconst canMixin = require('./canMixin');\n\nangular.module('dmv', [])\n  .factory('canPlugin', function() {\n    return function(proto) {\n      angular.extend(proto, canMixin);\n    };\n  })\n  .factory('authConfig', [\"$rootScope\", \"$injector\", function($rootScope, $injector) {\n\n    let userGetterMethod = function() {};\n    let asyncUserGetterMethod = function() {};\n    let canGetUserAsync = false;\n\n    const getUser = function() {\n      return $injector.invoke(userGetterMethod);\n    };\n    const getUserAsync = function() {\n      return $injector.invoke(asyncUserGetterMethod);\n    };\n\n    return {\n      getUserAsync: function(fn) {\n        asyncUserGetterMethod = fn;\n        canGetUserAsync = true;\n      },\n      getUser: function(fn) {\n        userGetterMethod = fn;\n\n        $rootScope.can = (verb, noun) => {\n          try { \n            return getUser().can(verb, noun);\n          } catch (e) {\n            return false;\n          }\n        }\n        $rootScope.hasRole = role => {\n          try { \n           return getUser().hasRole(role);\n          } catch (e) {\n            return false;\n          }\n        }\n\n\n        $rootScope.$on('$stateChangeStart', function(event, next) {\n          let user = getUser();\n          if (canGetUserAsync) {\n            user = getUserAsync();\n          }\n          return Promise.resolve(user)\n            .then(user => {\n              if(next && next.auth) {\n                if(!user) {\n                  $rootScope.$broadcast('NOT_AUTHENTICATED');\n                  event.preventDefault();\n                  return;\n                }\n                if(next.auth === true) { return; }\n                if(typeof next.auth === 'function') {\n                  if(!next.auth.call(event, user, next)) {\n                    event.preventDefault();\n                    $rootScope.$broadcast('NOT_AUTHORIZED');\n                  }\n                  return;\n                }\n                for(let verb in next.auth) {\n                  if(next.auth.hasOwnProperty(verb)) {\n                    let noun = next.auth[verb];\n                    if(!user.can(verb, noun)) {\n                      event.preventDefault();\n                      $rootScope.$broadcast('NOT_AUTHORIZED');\n                      return;\n                    }\n                  }\n                }\n              }\n\n            });\n        });\n      }\n    };\n\n  }]);\n\n\n\n\n// WEBPACK FOOTER //\n// ./angularPlugin.js","'use strict';\n\nconst roles = require('./roles');\n\nconst onPermissionList = (list, verb, noun) => {\n  return list && !!list.find(item => item.verb === verb && item.noun === noun);\n};\n\n/**\n * Checks if a user has the ability to perform an action on a noun\n * @memberOf plugins/mongoose\n * @param  {string} verb\n * @param  {string} noun\n * @return {boolean}\n */\nexports.can = function(verb, noun) {\n  if(onPermissionList(this.permissionWhiteList, verb, noun)) {\n    return true;\n  } else if(onPermissionList(this.permissionBlackList, verb, noun)) {\n    return false;\n  } else {\n    return roles.can(this.roles, verb, noun);\n  }\n};\n\n/**\n * Determines if user has role or roles\n * @param  {String|Array}  r role\n * @return {Boolean}\n */\nexports.hasRole = function(r) {\n  if (typeof r === 'string'){\n    return this.roles.indexOf(r) !== -1;\n  } else if (Array.isArray(r)) {\n    return !r.some(role => this.roles.indexOf(role) === -1)\n  }\n};\n\n\n// WEBPACK FOOTER //\n// ./canMixin.js"],"sourceRoot":""}